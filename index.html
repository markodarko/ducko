<HTML>

<style>
canvas {
	display:block;
	background:black;
	user-select:none;
	}
*{
	margin: 0;
   	padding: 0;
}
</style>

<center>
<canvas id='gamewindow' width = '128' height = '64'></canvas>
</center>
<script src='controls.js'></script>

<script>

const SCALE = 5, SPRITE_WIDTH = 8*SCALE;

const COLORS = {
white	:'white',
black	:'black',
red	:'#f83800',
pink	:'#f87858',
green	:'#00b800', 
Lgreen	:'#b8f818',  
Dgreen	:'#007800', 
orange	:'#f8b800',
Dgrey	:'#787878',
cyan	:'#a4e4fc', 
}

class Tile{
  constructor(img){
	this.img = img;
  }
  drawImg(x=0,y=0,color=['black','red'],frame=0){
	this.img[frame].forEach(block => {
		ctx.fillStyle = color[block[4]]
		ctx.fillRect(block[0]+x,block[1]+y,block[2],block[3])
	}) 
  };
}

class Sprite extends Tile{
  constructor(img,speed=30,frame=0){
	super(img);
	this.frame = frame;
	this.maxFrame = img.frames;
	this.speed = speed;
	this.time = 0;
  }
  updateFrame(){
	if (this.time >= this.speed) {
	  this.time = 0;
	  this.frame = (this.frame+1)%this.maxFrame;
	}else this.time++
  };
}

const IMAGES = {

player	:
	{
	frames:2,
	0:[[1,1,6,2,0] ,[2,1,4,4,0],[3,-2,2,4,0],[2,-3,1,1,0], 
	   [4,-1,2,1,1],[0,2,1,2,1],[7,2,1,2,1] ,[2,5,1,1,1],[5,5,1,2,1],[1,6,3,1,1],[4,7,3,1,1]
	  ],
	1:[[1,2,6,2,0] ,[2,1,4,4,0],[3,-3,2,4,0],[2,-4,1,1,0], 
	   [4,-2,2,1,1],[0,3,1,2,1],[7,3,1,2,1] ,[2,5,1,2,1],[5,5,1,2,1],[1,7,3,1,1],[4,6,3,1,1]
	  ]
	},
wall	:
	[[
	[0,1,7,3,1],[0,5,3,3,1],[4,5,4,3,1]
	]],
wall2	:
	[[
	[-1,-1,10,10,0],[0,0,8,8,1],[1,1,6,6,0],[2,2,4,4,1]
	]],
spikeUP	:
	{
	frames:2,
	0:[[1,1,3,3,1],[2,4,1,2,1],[5,1,3,2,1],[6,3,1,2,1]],
	1:[[1,1,3,2,1],[2,3,1,2,1],[5,1,3,3,1],[6,4,1,2,1]]
	},
spikeDWN:
	{
	frames:2,
	0:[[1,5,3,3,1],[2,3,1,2,1],[5,6,3,2,1],[6,4,1,2,1]],
	1:[[1,6,3,2,1],[2,4,1,2,1],[5,5,3,3,1],[6,3,1,2,1]]
	},
spikeL	:
	{
	frames:2,
	0:[[1,1,3,3,1],[2,4,1,2,1],[5,1,3,2,1],[6,3,1,2,1]],
	1:[[1,1,3,2,1],[2,3,1,2,1],[5,1,3,3,1],[6,4,1,2,1]]
	},
spikeR	:
	{
	frames:2,
	0:[[1,1,3,3,1],[2,4,1,2,1],[5,1,3,2,1],[6,3,1,2,1]],
	1:[[1,1,3,2,1],[2,3,1,2,1],[5,1,3,3,1],[6,4,1,2,1]]
	},

}

const SPRITES = {

player	:new Sprite(IMAGES.player),
wall	:new Tile(IMAGES.wall),
wall2	:new Tile(IMAGES.wall2),
spikeUP	:new Sprite(IMAGES.spikeUP),
spikeDWN:new Sprite(IMAGES.spikeDWN)

}

class Hero{
  constructor(x,y){
	this.sprite = SPRITES.player;
	this.x = x;
	this.y = y;
	this.colors = [COLORS.Dgrey,COLORS.orange];
  }
  draw(){
	this.sprite.updateFrame();
	this.sprite.drawImg(32,32,this.colors,this.sprite.frame);

  };
  update(){
  };
}


var canvas = document.getElementById('gamewindow');
var ctx = canvas.getContext('2d');
canvas.height *= SCALE;
canvas.width  *= SCALE;
ctx.scale(SCALE,SCALE);


function updateGame(){
SPRITES.spikeUP.updateFrame()
SPRITES.spikeDWN.updateFrame()
}

function drawGame(){
player.draw()
SPRITES.wall.drawImg(8,0,[COLORS.black,COLORS.red])
SPRITES.wall.drawImg(16,0,[COLORS.black,COLORS.red])
SPRITES.wall.drawImg(24,0,[COLORS.black,COLORS.red])
SPRITES.wall.drawImg(0,8,[COLORS.black,COLORS.red])
SPRITES.wall.drawImg(0,16,[COLORS.black,COLORS.red])
SPRITES.wall.drawImg(0,24,[COLORS.black,COLORS.red])
SPRITES.wall.drawImg(0,32,[COLORS.black,COLORS.red])
SPRITES.wall.drawImg(0,40,[COLORS.black,COLORS.red])
SPRITES.wall.drawImg(0,48,[COLORS.black,COLORS.red])
SPRITES.wall.drawImg(8,56,[COLORS.black,COLORS.red])
SPRITES.wall.drawImg(16,56,[COLORS.black,COLORS.red])
SPRITES.wall2.drawImg(0,56,[COLORS.black,COLORS.red])
SPRITES.wall2.drawImg(0,0,[COLORS.black,COLORS.red])
SPRITES.wall2.drawImg(32,0,[COLORS.black,COLORS.red])
SPRITES.spikeUP.drawImg(32,8,[COLORS.black,COLORS.white],SPRITES.spikeUP.frame)
SPRITES.spikeDWN.drawImg(16,48,[COLORS.black,COLORS.white],SPRITES.spikeDWN.frame)

}

function mainloop(){
ctx.clearRect(0,0,canvas.width,canvas.height)
updateGame();
drawGame();
requestAnimationFrame(mainloop)
}
player = new Hero(4,4)
mainloop()





</script>